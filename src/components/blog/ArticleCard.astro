---
import type { CollectionEntry } from 'astro:content';

interface Props {
  article: CollectionEntry<'blog'>;
  variant?: "default" | "featured" | "horizontal";
}

const { article, variant = "default" } = Astro.props;
const { data } = article;
const slug = article.id.split('/').pop()?.replace(/\.[^/.]+$/, "") || article.id;
---

{variant === "featured" && (
  <article class="group relative overflow-hidden rounded-2xl bg-primary p-8 flex flex-col justify-end min-h-[400px]">
    <div class="relative z-10">
      <span class="mb-4 inline-flex rounded-full bg-primary-foreground/20 px-3 py-1 text-sm font-medium text-primary-foreground">
        {data.subCategorySlug}
      </span>
      <a href={`/blog/${slug}`}>
        <h3 class="font-serif text-2xl font-semibold text-primary-foreground sm:text-3xl text-balance hover:underline underline-offset-4">
          {data.title}
        </h3>
      </a>
      <p class="mt-3 text-primary-foreground/80 leading-relaxed">
        {data.excerpt}
      </p>
      <div class="mt-6 flex items-center gap-4">
        <span class="flex items-center gap-1.5 text-sm text-primary-foreground/70">
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10" />
            <path d="M12 6v6l4 2" />
          </svg>
          {data.readTime}
        </span>
        <a
          href={`/blog/${slug}`}
          class="inline-flex items-center rounded-lg bg-primary-foreground px-4 py-2 text-sm font-medium text-primary hover:bg-primary-foreground/90 transition-colors"
        >
          Read Article
        </a>
      </div>
    </div>
    <div class="absolute top-0 right-0 w-64 h-64 bg-primary-foreground/5 rounded-full blur-3xl"></div>
  </article>
)}

{variant === "horizontal" && (
  <article class="group relative overflow-hidden rounded-2xl border border-border bg-card p-6 transition-all hover:border-primary/30 hover:shadow-lg">
    <div class="flex flex-col sm:flex-row gap-4">
      <div class="flex-1">
        <div class="flex items-center gap-2 mb-3">
          <span class="inline-flex rounded-full border border-border px-3 py-1 text-xs font-medium text-foreground">
            {data.subCategorySlug}
          </span>
          <span class="flex items-center gap-1.5 text-sm text-muted-foreground">
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" />
              <path d="M12 6v6l4 2" />
            </svg>
            {data.readTime}
          </span>
        </div>
        <a href={`/blog/${slug}`}>
          <h3 class="font-serif text-xl font-semibold text-foreground group-hover:text-primary transition-colors text-balance">
            {data.title}
          </h3>
        </a>
        <p class="mt-2 text-muted-foreground text-sm leading-relaxed line-clamp-2">
          {data.excerpt}
        </p>
        <div class="mt-4 flex flex-wrap gap-2">
          {data.tags && data.tags.slice(0, 3).map((tag) => (
            <a
              href={`/tag/${tag}`}
              class="text-xs text-muted-foreground hover:text-primary transition-colors"
            >
              #{tag}
            </a>
          ))}
        </div>
      </div>
      <div class="flex items-end sm:items-center">
        <a
          href={`/blog/${slug}`}
          class="inline-flex items-center text-sm font-medium text-primary hover:text-primary/80 transition-colors"
        >
          Read More
          <svg class="ml-1 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14M12 5l7 7-7 7" />
          </svg>
        </a>
      </div>
    </div>
  </article>
)}

{variant === "default" && (
  <article class="group relative overflow-hidden rounded-2xl border border-border bg-card p-6 transition-all hover:border-primary/30 hover:shadow-lg">
    <span class="mb-3 inline-flex rounded-full border border-border px-3 py-1 text-xs font-medium text-foreground">
      {data.subCategorySlug}
    </span>
    <a href={`/blog/${slug}`}>
      <h3 class="font-serif text-xl font-semibold text-foreground group-hover:text-primary transition-colors text-balance">
        {data.title}
      </h3>
    </a>
    <p class="mt-2 text-muted-foreground text-sm leading-relaxed line-clamp-2">
      {data.excerpt}
    </p>
    <div class="mt-4 flex items-center justify-between">
      <span class="flex items-center gap-1.5 text-sm text-muted-foreground">
        <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10" />
          <path d="M12 6v6l4 2" />
        </svg>
        {data.readTime}
      </span>
      <a
        href={`/blog/${slug}`}
        class="inline-flex items-center text-sm font-medium text-primary hover:text-primary/80 transition-colors"
      >
        Read More
        <svg class="ml-1 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14M12 5l7 7-7 7" />
        </svg>
      </a>
    </div>
  </article>
)}
