
---
import Layout from '@/layouts/Layout.astro';
import { getOrganizationSchema } from '@/utils/schema';
import { providers } from "@/lib/providers-data";
import Provider from "@/components/pages/providers/Provider";
import Header from "@/components/Header";
import { ProviderBio } from "@/components/providers/ProviderBio";
import { ProviderSpecialties } from "@/components/providers/ProviderSpecialties";
import { ProviderApproach } from "@/components/providers/ProvidersApproach";
import { ProviderInsurances } from "@/components/providers/ProviderInsurances";
import { ProviderQualifications } from "@/components/providers/ProviderQualifications";
import { ProviderLocations } from "@/components/providers/ProviderLocations";
import { ProviderFAQ } from "@/components/providers/ProviderFAQ";
import { ProviderCTA } from "@/components/providers/ProviderCTA";
import CrisisNotice from "@/components/common/CrisisNotice";
import Footer from "@/components/Footer";

export function getStaticPaths() {
  return providers.map((p) => ({
    params: { slug: p.slug },
    props: { provider: p },
  }));
}

const { provider } = Astro.props;

if (!provider) {
  // Return a proper 404 instead of rendering a blank page
  return new Response("Provider not found", { status: 404 });
}
---

<Layout 
  title={provider.name}
  description={provider.description}
  schema={getOrganizationSchema()}
>

  <Provider client:load provider={provider} />

</Layout>
